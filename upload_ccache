#!/bin/bash

cd /tmp

# Compress function with pigz for faster compression
com () {
    tar --use-compress-program="pigz -k -$2 " -cf $1.tar.gz $1
}

up () {
	curl --upload-file $1 https://transfer.sh/$(basename $1); echo
	# 14 days, 10 GB limit
}

echo "|| Downloading CCACHE ||"
time com ccache 1 # Compression level 1, its enough
time up ccache.tar.gz

# clean storage
rm -rf /tmp/*
